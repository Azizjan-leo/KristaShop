@using Module.Common.Admin.Admin.Models
@model Module.Client.Admin.Admin.Models.NewUserViewModel
@{
    ViewData["Title"] = "Создать контрагента";
    ViewData["NavbarButtons"] = new List<MenuButtonsViewModel> {
        new MenuButtonsViewModel("Назад", "Index", "Home", "", null, "btn-main-info")
    };
}

<div class="main-container">
    <div class="row">
        <div class="col-12 col-xl-6">
            <form asp-action="CreateUser">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <input type="hidden" asp-for="Id" />
                <input type="hidden" asp-for="UserId" />
                <input type="hidden" asp-for="ReturnTo" />
                <div class="form-group">
                    <label asp-for="FullName" class="control-label"></label>
                    <input asp-for="FullName" class="form-control form-control-sm" />
                    <span asp-validation-for="FullName" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Login" class="control-label"></label>
                    <input asp-for="Login" class="form-control form-control-sm" />
                    <span asp-validation-for="Login" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Password" class="control-label"></label>
                    <div class="input-group">
                        <input asp-for="Password" class="form-control form-control-sm" />
                        <div class="input-group-append">
                            <button class="btn btn-primary" type="button" onclick="GeneratePassword(this);">Сгенерировать</button>
                        </div>
                    </div>
                    <span asp-validation-for="Password" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Phone" class="control-label"></label>
                    <input asp-for="Phone" class="form-control form-control-sm" />
                    <span asp-validation-for="Phone" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Email" class="control-label"></label>
                    <input asp-for="Email" class="form-control form-control-sm" />
                    <span asp-validation-for="Email" class="text-danger"></span>
                </div>
                <div class="form-group form-live-selector">
                    <label asp-for="ManagerId" class="control-label"></label>
                    <select asp-for="ManagerId" asp-items="Model.Managers" class="selectpicker form-control form-control-sm show-menu-arrow" data-size="10" data-live-search="true" data-actions-box="true">
                        <option value="">Без менеджера</option>
                    </select>
                    <span asp-validation-for="ManagerId" class="text-danger"></span>
                </div>
                <div class="form-group form-live-selector">
                    <label asp-for="CityId" class="control-label"></label>
                    <select asp-for="CityId" asp-items="Model.Cities" class="selectpicker form-control form-control-sm show-menu-arrow" data-size="10" data-live-search="true" data-actions-box="true">
                        <option value="">Другой город</option>
                    </select>
                    <span asp-validation-for="CityId" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="OtherCity" class="control-label"></label>
                    <input asp-for="OtherCity" class="form-control form-control-sm" />
                    <span asp-validation-for="OtherCity" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="MallAddress" class="control-label"></label>
                    <input asp-for="MallAddress" class="form-control form-control-sm" />
                    <span asp-validation-for="MallAddress" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="CompanyAddress" class="control-label"></label>
                    <input asp-for="CompanyAddress" class="form-control form-control-sm" />
                    <span asp-validation-for="CompanyAddress" class="text-danger"></span>
                </div>

                <hr />

                <div class="form-group form-live-selector-multy">
                    <label asp-for="VisibleCatalogs" class="control-label"></label>
                    <select asp-for="VisibleCatalogs" asp-items="Model.CatalogsList" class="selectpicker form-control show-menu-arrow" data-size="10" data-live-search="true" multiple data-actions-box="true">
                    </select>
                    <span asp-validation-for="VisibleCatalogs" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <div class="custom-control custom-switch">
                        <input type="checkbox" class="custom-control-input" asp-for="SendToEmail">
                        <label class="custom-control-label" asp-for="SendToEmail"></label>
                    </div>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-main-primary">Создать контрагента</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>

    function GeneratePassword(btnObj) {
        var passObj = $(btnObj).parents(".input-group").find("#Password");

        var passVal = "";
        while (passVal.length < 6) {
            passVal = passVal + Math.floor(Math.random() * Math.floor(10));
        }      

        passObj.val(passVal);
    }

</script>